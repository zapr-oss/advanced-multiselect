"use strict";angular.module("advancedMultiselect",[]),angular.module("advancedMultiselect").directive("checkboxIndeterminate",function(){return{link:function(t,e,n){t.$watch(n.checkboxIndeterminate,function(t){e[0].indeterminate=!!t})}}}).directive("advancedMultiselect",function(t,e){return{restrict:"E",templateUrl:"advancedMultiselect/advancedMultiselect.html",scope:{label:"@",defaultPlaceholder:"=",model:"=",submenuCb:"=",disableStatus:"@"},link:function(n,i,l){var c=function(t,e){for(var n=e.parentNode;null!==n;){if(n===t)return!0;n=n.parentNode}return!1};t.on("click",function(t){var l=i[0].querySelector(".multiselect-values"),s=t.target;c(l,s)||e(function(){n.showOptions=!1},0)})},controller:function(t,e,n){function i(t,e){t.forEach(function(t){t.isSelected=e,t.children&&i(t.children,e)})}function l(t,e){if(t.children&&t.children.length){for(var n={},i=0;i<t.children.length;i++){var c=l(t.children[i],e);c===o.INDETERMINATE&&(e.val=!0),n[c]?n[c]++:n[c]=1}return n[o.INDETERMINATE]||Object.keys(n).length>1?(t.isIndeterminate=!0,t.isSelected=!1,o.INDETERMINATE):(t.isIndeterminate=!1,t.isSelected=!!n.true,t.isSelected)}return!!t.isSelected}function c(e){for(var n={val:!1},i=0;i<e.length;i++)l(e[i],n);if(n.val)e.isIndeterminate=!0;else if(_.groupBy(e,function(t){return!!t.isIndeterminate}).true)e.isIndeterminate=!0;else{var c=_.groupBy(e,function(t){return!!t.isSelected});Object.keys(c).length>1?e.isIndeterminate=!0:(e.isIndeterminate=!1,t.isSelectAll=!!c.true)}}function s(t){var e=[],n=_.groupBy(t,"isSelected");return n.true=n.true||[],n.true.forEach(function(t){e.push(t.name)}),(n.false||[]).concat(n.undefined||[]).forEach(function(t){if(t.children){var n=_.groupBy(t.children,"isSelected");n.true=n.true||[],n.true.forEach(function(t){e.push(t.name)}),(n.false||[]).concat(n.undefined||[]).forEach(function(t){if(t.children){var n=_.groupBy(t.children,"isSelected");n.true=n.true||[],n.true.forEach(function(t){e.push(t.name)})}})}}),e}function r(){var e=t.$watch("model",function(n,i){if(!angular.equals(n,i)){e(),c(n);var l=s(n);l.length?(t.placeholder=l[0],l.length>1&&(t.placeholder+=" and "+(l.length-1)+" more selected")):t.placeholder=t.defaultPlaceholder,r()}},!0)}t.placeholder=t.defaultPlaceholder;var o={INDETERMINATE:"INDETERMINATE"};t.toggleOptions=function(e){t.showOptions=!t.showOptions,e.stopPropagation()},t.toggleSubLevelOptions=function(e){e.showSubLevels=!e.showSubLevels,"function"==typeof t.submenuCb&&t.submenuCb(e)},t.toggleChildSelections=function(t){var e=!t.isSelected;t.children&&i(t.children,e)},t.toggleSelectAll=function(e){e&&(t.isSelectAll=!t.isSelectAll),i(t.model,t.isSelectAll)},t.init=function(){t.showOptions=!1,r()},t.init()}}}),angular.module("advancedMultiselect").run(["$templateCache",function(t){t.put("advancedMultiselect.html",'\x3c!-- \nCopyright (c) 2017-present, Red Brick Lane Marketing Solutions Pvt. Ltd.\nAll rights reserved.\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/> \n--\x3e\n\n<script type="text/ng-template" id="subChildren.html">\n\t<div>\n\t\t<input type="checkbox" checkbox-indeterminate="subChildren.isIndeterminate" ng-click="toggleChildSelections(subChildren)" ng-model="subChildren.isSelected" ng-model-options="{debounce : 100}">\n\t\t<span ng-show=subChildren.children class="glyphicon glyphicon-chevron-right font_size_11px" ng-class="{\'glyphicon-chevron-right\': !subChildren.showSubLevels, \'glyphicon-chevron-down\': subChildren.showSubLevels}" ng-click="toggleSubLevelOptions(subChildren)"></span>\n\t\t<span>{{subChildren.name}}</span>\n\t\t<div ng-show=subChildren.showSubLevels class="padding_l_18rem">\n\t\t\t<div class="display_flex" ng-repeat="secondLevel in subChildren.children">\n\t\t\t\t<div>\n\t\t\t\t\t<input type="checkbox" ng-model="secondLevel.isSelected">\n\t\t\t\t</div>\n\t\t\t\t<div class="padding_l_3px">\n\t\t\t\t\t<span>{{secondLevel.name}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n<\/script>\n\n<div class="row advanced-Multiselect">\n\t<div class="col-xs-12">\n\t\t<div>\n\t\t\t<label class="control-label">{{label}}</label>\n\t\t\t<input class=\'form-control advanced-Multiselect-input\' type="text" ng-disabled="disableStatus==\'true\'" ng-model="multiselectFilter" placeholder="{{placeholder}}" ng-click="toggleOptions($event);">\n\t\t</div>\n\t\t<div ng-show="showOptions" class="multiselect-values">\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<input type="checkbox" checkbox-indeterminate="model.isIndeterminate" ng-click="toggleSelectAll()" ng-model="isSelectAll">\n\t\t\t\t\t<span class="advanced-Multiselect-selectAll" ng-click="toggleSelectAll(true)">\n\t\t\t\t\t\t<u>SELECT ALL</u>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div ng-repeat="firstLevel in model">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input type="checkbox" checkbox-indeterminate="firstLevel.isIndeterminate" ng-click="toggleChildSelections(firstLevel)" ng-model="firstLevel.isSelected" ng-model-options="{debounce : 100}">\n\t\t\t\t\t\t<span ng-show=firstLevel.children class="glyphicon glyphicon-chevron-right font_size_11px" ng-class="{\'glyphicon-chevron-right\': !firstLevel.showSubLevels, \'glyphicon-chevron-down\': firstLevel.showSubLevels}" ng-click="toggleSubLevelOptions(firstLevel)"></span>\n\t\t\t\t\t\t<span>{{firstLevel.name}}</span>\n\t\t\t\t\t\t<div ng-show=firstLevel.showSubLevels class="padding_l_18rem">\n\t\t\t\t\t\t\t<div class="display_flex" ng-repeat="subChildren in firstLevel.children" ng-include="\'subChildren.html\'">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<input type="checkbox" ng-model="subChildren.isSelected">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="padding_l_3px">\n\t\t\t\t\t\t\t\t\t<span>{{secondLevel.name}}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>')}]);